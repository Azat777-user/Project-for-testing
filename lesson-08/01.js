/*
  –ò–∑—É—á–∏—Ç–µ —Ñ–∞–π–ª index.html (—Å–µ–∫—Ü–∏—é "–£—Ä–æ–∫ 8"). –†–∞–∑–º–µ—Ç–∫–∞ —É–∂–µ –Ω–∞–ø–∏—Å–∞–Ω–æ - –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ js-–∫–æ–¥.

  –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –º–∞–≥–∞–∑–∏–Ω–∞ –ø–∏—Ç–æ–º—Ü–µ–≤ –ø–æ—á—Ç–∏ –≥–æ—Ç–æ–≤. –ù–µ —Ö–≤–∞—Ç–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–æ–±–∞–≤–ª—è—Ç—å –ø–∏—Ç–æ–º—Ü–µ–≤ –≤ –∫–æ—Ä–∑–∏–Ω—É.
  –í–∞—à–∞ –∑–∞–¥–∞—á–∞ –Ω–∞–ø–∏—Å–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –ø–∏—Ç–æ–º—Ü–µ–≤ –≤ –∫–æ—Ä–∑–∏–Ω—É.

  1. –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–Ω–æ–ø–∫—É —Å –ø–∏—Ç–æ–º—Ü–µ–º, id –ø–∏—Ç–æ–º—Ü–∞ –¥–æ–ª–∂–µ–Ω –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –≤ –º–∞—Å—Å–∏–≤ cart.
  2. –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–∏—Ç–æ–º—Ü–∞ –≤ –∫–æ—Ä–∑–∏–Ω—É, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é updateCartDisplay 
  (–æ–Ω–∞ –æ–±–Ω–æ–≤–∏—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã).
  3. –í –∫–æ—Ä–∑–∏–Ω—É –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ –±–æ–ª–µ–µ 3 –ø–∏—Ç–æ–º—Ü–µ–≤. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ, 
  —Ç–æ –≤ messageBox –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—Å—è —Ç–µ–∫—Å—Ç: '–í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª–µ–µ 3 –ø–∏—Ç–æ–º—Ü–µ–≤'

  ‚ùï‚ùï‚ùï –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –≤ –∑–∞–¥–∞–Ω–∏–∏ –∫–æ–¥ –Ω–µ —Å–ª–µ–¥—É–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å. –¢—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–æ–ø–∏—Å–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è.

  üßô –ü–æ–¥—Å–∫–∞–∑–∫–∞: –∏—Å–ø–æ–ª—å–∑—É–π –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ - –±—É–¥–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–¥–Ω–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–æ–±—ã—Ç–∏–π –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
  üßô –ü–æ–¥—Å–∫–∞–∑–∫–∞: –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–Ω–µ—Ç –ø–æ –∫–Ω–æ–ø–∫–µ —Å –ø–∏—Ç–æ–º—Ü–µ–≤, id –ø–∏—Ç–æ–º—Ü–∞ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∏—Ç—å 
  –∏–∑ –æ–±—ä–µ–∫—Ç–∞ —Å–æ–±—ã—Ç–∏—è (event.target.id)
*/

const PETS = [
  { id: 'cat', title: 'üê±' },
  { id: 'dog', title: 'üê∂' },
  { id: 'parrot', title: 'ü¶ú' },
  { id: 'fish', title: 'üê†' },
  { id: 'spider', title: 'üï∑' },
  { id: 'snake', title: 'üêç' },
  { id: 'hamster', title: 'üêπ' },
  { id: 'turtle', title: 'üê¢' },
  { id: 'chinchilla', title: 'ü¶á' },
  { id: 'hedgehog', title: 'ü¶î' },
  { id: 'rat', title: 'üêÄ' },
  { id: 'frog', title: 'üê∏' },
]

const cart = []

const petShop = document.querySelector('.pet-shop')
const cartList = document.getElementById('cart-list')
const messageBox = document.getElementById('message-box')
const clearCartButton = document.getElementById('clear-cart-button')

// –†–µ–Ω–¥–µ—Ä–∏–º –∫–Ω–æ–ø–∫–∏ –¥–ª—è –ø–∏—Ç–æ–º—Ü–µ–≤
for (let i = 0; i < PETS.length; i++) {
  const pet = PETS[i]

  const petButtonElement = document.createElement('button')
  petButtonElement.classList.add('pet')
  petButtonElement.id = pet.id
  petButtonElement.textContent = pet.title

  petShop.append(petButtonElement)
}

// –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã
function updateCartDisplay() {
  cartList.innerHTML = ''

  for (let i = 0; i < cart.length; i++) {
    const petId = cart[i]
    console.log(cart[i])
    const pet = PETS.find((item) => item.id === petId)
    const petSpanElement = document.createElement('li')
    petSpanElement.classList.add('pet')
    petSpanElement.textContent = pet.title
    cartList.append(petSpanElement)
  }
}

clearCartButton.addEventListener('click', function (event) {
  cart.length = 0
  updateCartDisplay()
  petShop.innerHTML = ''
  for (let i = 0; i < PETS.length; i++) {
    const pet = PETS[i]
  
    const petButtonElement = document.createElement('button')
    petButtonElement.classList.add('pet')
    petButtonElement.id = pet.id
    petButtonElement.textContent = pet.title
    petButtonElement.disabled = false
    
    petShop.append(petButtonElement)
  }
  messageBox.innerHTML = ''
})

// –¢–≤–æ–π –∫–æ–¥:

function addPet(event){
  cart.push(event.target.id)
  for(let i = 0; i == 0 && i <= cart.length; i++){
    //debugger
    if(cart.includes(cart[i]))  {
      event.target.disabled = true
      //alert('–ù–µ–ª—å–∑—è –¥–æ–±–∞–≤–∏—Ç—å –ø–∏—Ç–æ–º—Ü–∞, —Ç–∞–∫ –∫–∞–∫ —Ç–∞–∫–æ–π –ø–∏—Ç–æ–º–µ—Ü —É–∂–µ –≤ –∫–æ—Ä–∑–∏–Ω–µ')
    }
  }

  if(cart.length > 2) {
    //debugger
    console.log(cart.length)
    updateCartDisplay()
    petShop.innerHTML = ''
    for (let i = 0; i < PETS.length; i++) {
      const pet = PETS[i]
    
      const petButtonElement = document.createElement('button')
      petButtonElement.classList.add('pet')
      petButtonElement.id = pet.id
      petButtonElement.textContent = pet.title
      petButtonElement.disabled = true
      
      petShop.append(petButtonElement)
    }

    messageBox.innerHTML = "<p style='color: red'>–í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª–µ–µ 3 –ø–∏—Ç–æ–º—Ü–µ–≤</p>"
  }

  console.log(event.target)
  
  //debugger
  updateCartDisplay()
  let existingItem  = cart.filter(item => item === event.target.id)

}

petShop.addEventListener('click', addPet)

